<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Upload XML</title>
    <script src="jquery.js"></script>
    <script src="xml2json.js"></script>
  </head>

  <body>
    <div>
      <h2>UPLOAD XML: </h2>
      <input type="file" id="files" name="files[]" multiple />
    </div>
    <script type="text/javascript">
      function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object
        // Loop through the FileList 
        for(var i = 0, f; f = files[i]; i++){
            var reader = new FileReader();
            // Closure to capture the file information
            reader.onload = (function(theFile) {
                return function(e) {
                    console.log("targetObj: ", e.target.result);
                    var jsonObj = $.xml2json(e.target.result);
                    console.log("jsonObj: ", jsonObj);
                };
            })(f);
            // Read in the file as a data text.
            reader.readAsText(f);
        }
    }
    //$("#files").on("change", handleFileSelect);
    document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script>
  </body>

</html>
